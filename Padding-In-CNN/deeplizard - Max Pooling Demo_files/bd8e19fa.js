import{l as t,S as e,A as r}from"./0d920d27.js";import{d as a}from"./72199188.js";import"./88e62576.js";t.load_d3().then((()=>{let t=a.mnist,o=.25,n=e.create_array({width:28,data:t.data[0].image.map(((t,r)=>({id:r,value:t,fill:e.color.grayscale(t,o)}))),options:{width:.85,rx:.15,stroke_width:0,value_transform:t=>t.toFixed(1)}}),l={height:2,width:2},i={horizontal:2,vertical:2},s=n.array.windows(l,i),d=r.nextFunction(s,0),c=d();n.array.append_window(c).select("rect").attr("stroke","rgba(0,150,0,.5)").attr("stroke-width",.25),n.add_padding(.02);let u=n.array.window_operation_output_array(c);function p(t){let e=t.max_element();u.array.push(e);let r=t.x,a=t.y;n.select(".array .window rect").transition().duration(1).attr("transform",`translate(${r}, ${a})`).on("end interrupt",(()=>{m.continue()})),u.selectAll(".elements rect").last().on("mouseover",((t,e)=>{m.isPlaying()||(d3.select(t.target).call(w),n.select(".array .window rect").transition().duration(1).attr("transform",`translate(${r}, ${a})`))})).call(g)}p(c);let m=function(){let t={},e=!1,a=[".controls #step",".controls .image-dropdown > button",".controls .filter-dropdown > button",".controls .dataset-dropdown > button"];return t.step=function(){c=d(),0==c.id?t.reset():p(c)},t.play=function(){e=!0,$(".controls #play").text("Pause"),$(a.join(", ")).prop("disabled",!0),t.step()},t.pause=function(){e=!1,$(".controls #play").text("Play"),$(a.join(", ")).prop("disabled",!1)},t.continue=function(){e&&(c.id<s.length-1?t.step():t.pause())},t.isPlaying=function(){return e},t.reset=function(){u.array.clear(),u.array.update(),s=n.array.windows(l,i),d=r.nextFunction(s,0),c=d(),n.select(".window").remove(),n.array.append_window(c).select("rect").attr("stroke","rgba(0,150,0,.5)").attr("stroke-width",.25),u=n.array.window_operation_output_array(c),$(".visual .output").html(u.node()),p(c)},t}();function w(t){m.isPlaying()||t.attr("stroke","rgba(52,58,64,.9)").attr("stroke-width",.15)}function g(t){t.on("mouseout",((t,e)=>{u.selectAll(".elements rect").attr("stroke",u.array.options.stroke).attr("stroke-width",u.array.options.stroke_width),n.selectAll(".elements rect").attr("stroke",n.array.options.stroke).attr("stroke-width",n.array.options.stroke_width)}))}function h(){$(".image-dropdown .dropdown-menu").empty(),$(".image-dropdown button .image-choice").text(t.class_names[0]),t.data.forEach(((e,r)=>{let a=t.class_names[e.label],o=$(`.image-dropdown .dropdown-menu .dropdown-item:contains(${a})`).length;a=o>0?`${a} ${o+1}`:a,$(".image-dropdown .dropdown-menu").append(`<a class="dropdown-item" image_index=${r} href="#">${a}</a>`)})),$(".image-dropdown .dropdown-item").on("click",(t=>{t.preventDefault(),$(".image-dropdown button .image-choice").text(t.currentTarget.text),f(+$(t.currentTarget).attr("image_index")),m.reset()}))}function f(r=0){let a=t.data[r];n.array.data=a.image.map(((t,r)=>({id:r,value:t,fill:e.color.grayscale(t,o)}))),n.array.quickUpdate()}$(".controls #fullscreen").on("click",(t=>{var e;document.fullscreen?document.exitFullscreen():((e=document.getElementsByClassName("deeplizard-message")[0]).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),e.style.overflowY="auto",e.style.overflowX="hidden")})),$(".controls #step").on("click",(t=>{m.step()})),$(".controls #play").on("click",(t=>{m.isPlaying()?m.pause():m.play()})),$(".dataset-dropdown .dropdown-item").on("click",(e=>{e.preventDefault(),"MNIST"===e.currentTarget.text?(t=a.mnist,o=.25):"Fashion MNIST"===e.currentTarget.text&&(t=a.fashion_mnist,o=.4),$(".dataset-dropdown button .dataset-choice").text(e.currentTarget.text),h(),f(),m.reset()})),$(".filter-dropdown #filter-height").on("change",(t=>{t.preventDefault(),l.height=+t.currentTarget.value,m.reset()})),$(".filter-dropdown #filter-width").on("change",(t=>{t.preventDefault(),l.width=+t.currentTarget.value,m.reset()})),$(".filter-dropdown #horizontal-stride").on("change",(t=>{t.preventDefault(),i.horizontal=+t.currentTarget.value,m.reset()})),$(".filter-dropdown #vertical-stride").on("change",(t=>{t.preventDefault(),i.vertical=+t.currentTarget.value,m.reset()})),h(),f(),$(".visual .input").html(n.node()),$(".visual .output").html(u.node())}));
